:root{
  --bg-1: #fff1f8;
  --bokeh: radial-gradient(circle at 10% 20%, rgba(255, 240, 250,0.45), transparent 6%),
          radial-gradient(circle at 80% 80%, rgba(255, 245, 250,0.35), transparent 6%),
          linear-gradient(180deg, #fff6fb 0%, #fffafc 100%);
  --muted: #4b004b;
  --paper: #fffefc;
  --shadow: 0 26px 60px rgba(81,48,74,0.08);
  --pin-size: 14px;
  --polaroid-w: 210px;
  --polaroid-h: 210px;
}

/* Reset */
*{box-sizing:border-box;margin:0;padding:0}
html,body{height:100%}
body{
  font-family: "Poppins", system-ui, -apple-system, "Segoe UI", Roboto, Arial;
  background: var(--bokeh);
  color:var(--muted);
  -webkit-font-smoothing:antialiased;
  padding:28px;
}

/* Root structure */
.memory-root{max-width:1200px;margin:0 auto;display:flex;flex-direction:column;gap:18px}
.memory-header{display:flex;flex-direction:column;align-items:center;gap:8px}
.back-btn{align-self:flex-start;background:rgba(255,255,255,0.95);border:none;padding:8px 12px;border-radius:12px;box-shadow:0 10px 30px rgba(255,128,191,0.06);cursor:pointer;font-weight:700}
.memory-header h1{font-size:1.9rem;margin:0;color:var(--muted)}
.subtitle{color:#6b3a6b;opacity:0.95}

/* Garland container - each row is a string */
.garland-wrap{display:flex;flex-direction:column;gap:36px;padding:10px}

/* each "string row" */
.string-row{
  position:relative;
  padding:36px 6px 10px;
  overflow:visible;
}

/* string line */
.string-row::before{
  content:"";
  position:absolute;
  left:4%;
  right:4%;
  top:10px;
  height:4px;
  background: linear-gradient(90deg, rgba(200,120,170,0.15), rgba(255,150,200,0.12));
  border-radius:4px;
  filter: blur(0.6px);
  z-index:0;
}

/* row content (polaroids) */
.row-inner{
  display:flex;
  gap:20px;
  align-items:flex-start;
  justify-content:flex-start;
  padding:18px 40px 30px;
  position:relative;
  z-index:1;
}

/* polaroid card */
.polaroid{
  width: var(--polaroid-w);
  flex:0 0 var(--polaroid-w);
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:10px;
  background: var(--paper);
  border-radius:12px;
  padding:12px 12px 18px;
  box-shadow: var(--shadow);
  transform-origin: top center;
  transition: transform 250ms ease, box-shadow 250ms ease;
  cursor:pointer;
  position:relative;
  user-select:none;
}

/* small pin graphic above each polaroid */
.polaroid::before{
  content:"";
  width:var(--pin-size);
  height:var(--pin-size);
  background: linear-gradient(180deg,#ffd6ea,#e9d9ff);
  border-radius:50%;
  position:absolute;
  top:-10px;
  left:50%;
  transform:translateX(-50%);
  box-shadow: 0 6px 18px rgba(117,40,117,0.08);
  z-index:2;
}

/* subtle sway animation for each polaroid (different delays for natural) */
.polaroid.sway { animation: sway 6s ease-in-out infinite; }
.polaroid.sway:nth-child(4n+1){ animation-delay:0s }
.polaroid.sway:nth-child(4n+2){ animation-delay:0.8s }
.polaroid.sway:nth-child(4n+3){ animation-delay:1.2s }
.polaroid.sway:nth-child(4n+4){ animation-delay:1.6s }

@keyframes sway{
  0%{ transform: rotate(-1.2deg) translateY(0) }
  25%{ transform: rotate(1.6deg) translateY(-4px) }
  50%{ transform: rotate(-1.8deg) translateY(0) }
  75%{ transform: rotate(1.2deg) translateY(-2px) }
  100%{ transform: rotate(-1.2deg) translateY(0) }
}

/* image area like a polaroid photo */
.polaroid .photo{
  width: 100%;
  height: var(--polaroid-h);
  background: #eee;
  border-radius:10px;
  overflow:hidden;
  display:block;
}
.polaroid .photo img{
  width:100%;height:100%;object-fit:cover;display:block;
  transition: transform 420ms ease;
}
.polaroid:hover{ transform: translateY(-8px) scale(1.02); box-shadow: 0 44px 110px rgba(81,48,74,0.12) }
.polaroid:hover .photo img{ transform: scale(1.06) }

/* caption */
.caption{ font-weight:700; color:#4b004b; font-size:0.95rem; margin-top:4px; text-align:center }
.caption-sub{ font-size:0.82rem; color:#7a4a7a; opacity:0.9; margin-top:2px; text-align:center }

/* responsive: shrink polaroid sizes on small screens */
@media (max-width:1100px){
  :root{ --polaroid-w: 180px; --polaroid-h: 180px; }
}
@media (max-width:760px){
  :root{ --polaroid-w: 150px; --polaroid-h: 150px; }
  .row-inner{ gap:14px; padding-left:18px; padding-right:18px; }
}

/* lightbox */
/* ----------------------------
   LIGHTBOX — Fullscreen Viewer
   ---------------------------- */

.hidden {
    display: none !important;
}

/* Lightbox background layer */
.lightbox {
    position: fixed;
    inset: 0;
    background: linear-gradient(rgba(8, 8, 8, 0.65), rgba(8, 8, 8, 0.85));
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 99990;
    padding: 20px;
    transition: opacity 0.25s ease;
}

/* Lightbox content container */
.lb-content {
    max-width: 1100px;
    width: 100%;
    max-height: 78vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 12px;
    z-index: 99992;
    position: relative;
}

/* Actual displayed image */
.lb-content img {
    max-width: 100%;
    max-height: 72vh;
    object-fit: contain;
    border-radius: 10px;
    box-shadow: 0 30px 90px rgba(0,0,0,0.6);
    pointer-events: none; /* IMPORTANT — image never blocks clicks */
}

/* Caption below image */
.lb-caption {
    color: #fff;
    font-weight: 600;
    font-size: 1rem;
    text-align: center;
    margin-top: 8px;
    text-shadow: 0 2px 6px rgba(0,0,0,0.4);
}

/* ----------------------------
   BUTTONS (close, next, prev)
   ---------------------------- */

/* Close button */
.lb-close {
    position: absolute;
    right: 22px;
    top: 22px;
    background: #ffffff;
    border-radius: 12px;
    padding: 8px 12px;
    border: none;
    font-weight: 700;
    font-size: 1.1rem;
    cursor: pointer;
    z-index: 200000;  /* ABOVE EVERYTHING */
    box-shadow: 0 10px 40px rgba(0,0,0,0.25);
}

/* Navigation arrows */
.lb-nav {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: rgba(255,255,255,0.95);
    border: none;
    padding: 10px 14px;
    border-radius: 12px;
    font-weight: 700;
    font-size: 1.2rem;
    cursor: pointer;
    z-index: 200000; /* ABOVE EVERYTHING */
    box-shadow: 0 10px 40px rgba(0,0,0,0.25);
}

.lb-prev { left: 20px; }
.lb-next { right: 20px; }

.lb-nav:hover,
.lb-close:hover {
    background: #f4e3ff;
}

/* Bottom controls (download + counter) */
.lb-bottom {
    position: absolute;
    bottom: 22px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 16px;
    align-items: center;
    z-index: 200000;
    color: #fff;
    font-weight: 600;
    text-shadow: 0 2px 6px rgba(0,0,0,0.4);
}

/* Download button */
.lb-bottom .btn {
    background: linear-gradient(90deg,#e9d9ff,#ffd6ea);
    border: none;
    padding: 8px 14px;
    border-radius: 999px;
    cursor: pointer;
    color: #4b004b;
    font-weight: 700;
    box-shadow: 0 10px 30px rgba(81,48,74,0.06);
}

/* Counter text */
.lb-counter {
    color: #fff;
    font-size: 0.95rem;
}

/* small button style reused */
.btn{ background:linear-gradient(90deg,#e9d9ff,#ffd6ea); border:none; padding:8px 12px; border-radius:999px; cursor:pointer; font-weight:700; color:var(--muted); box-shadow:0 10px 30px rgba(81,48,74,0.06) }

/* accessibility focus */
.polaroid:focus{ outline:3px solid rgba(255,128,191,0.09) }
